<!doctype html>
  <html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Duel Documentation v3.0.1</title>
    <link rel="canonical" href="https://clux.github.io/duel">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
          <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
          <script>hljs.initHighlightingOnLoad();</script>
    <style>html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-variant-ligatures: none;
          font-variant-ligatures: none;
}

body {
  font-family: "Lato", "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Verdana, Tahoma, sans-serif;
  font-size: 62.5%;
  margin: 0;
  padding-left: 10px;
  color: #3a3a3a;
  background: #fcfefa;
}

a {
  color: #FE5210;
  text-decoration: none;
}

a:visited {
  color: #FE7110;
}

a:hover,
a:focus {
  color: #FFA158;
}

ol, ul, dl {
  margin: 0 0 0.6em 0;
  padding: 0;
}

ol ul, ol ol, ol dl,
ul ul, ul ol, ul dl,
dl ul, dl ol, dl dl {
  margin-bottom: 0;
}

ul, ol {
  margin-left: 2em;
}

dl dt {
  position: relative;
  margin: 1.5em 0 0;
}

dl dd {
  position: relative;
  margin: 0 1em 0;
}

dd + dt.pre {
  margin-top: 1.6em;
}

h1, h2, h3, h4, h5, h6 {
  color: #301004;
  text-rendering: optimizeLegibility;
  font-weight: 700;
  position: relative;
  margin-bottom: 0.5em;
}

header h1 {
  line-height: 2.0em;
  margin: 0;
}

#apicontent {
  padding-top: 1.0em;
}

#toc + h1 {
  margin-top: 1em;
  padding-top: 0;
}

h2 {
  font-size: 1.5em;
  margin: 1.0em 0 0.5em;
}

h2 + h2 {
  margin: 0 0 0.5em;
}

h3 {
  font-size: 1.0em;
  margin: 1.5em 0 0.5em;
}

h3 + h3 {
  margin: 0 0 0.5em;
}

h2, h3, h4 {
  position: relative;
  padding-right: 40px;
}

h1 span, h2 span, h3 span, h4 span {
  position: absolute;
  display: block;
  top: 0;
  right: 0;
}

h1 span:hover, h2 span:hover, h3 span:hover, h4 span:hover {
  opacity: 1;
}

h1 span a, h2 span a, h3 span a, h4 span a {
  font-size: 0.8em;
  color: #000;
  text-decoration: none;
  font-weight: bold;
}

h5 {
  font-size: 1.125em;
  line-height: 1.4em;
}

h6 {
  font-size: 1em;
  line-height: 1.4667em;
}

pre, tt, code {
  line-height: 1.5em;
  font-family: Monaco, Consolas, "Lucida Console", monospace;
  margin: 0; padding: 0;
}

.pre {
  font-family: Monaco, Consolas, "Lucida Console", monospace;
  line-height: 1.5em;
  font-size: 1.2em;
}

pre {
  padding: 1.0em 1.5em;
  vertical-align: top;
  background: #f2f5f0;
  margin: 0.166666em -4.0em 1.0em 0em;
  overflow-x: auto;
}

pre > code {
  font-size: 0.8em;
}

pre + h3 {
  margin-top: 2.225em;
}

code.pre {
  white-space: pre;
}

hr {
  background: none;
  border: medium none;
  border-bottom: 1px solid #7a7a7a;
  margin: 0em 0em 1em 0;
}

#toc {
}

#toc h2 {
  color: #C73E09;
  margin-top: 0;
  font-size: 1.0em;
  line-height: 0;
  margin: 1.5em 0;
}

#toc ul {
  font-size: 0.8125em;
}

#toc ul ul { font-size: 1.0em; }

#toc ul a {
  text-decoration:none;
}

#toc ul li {
  margin-bottom: 0.6666em;
  list-style: square outside;
}

#toc li > ul {
  margin-top: 0.6666em;
}

#toc ul a:hover,
#toc ul a:focus {
}

span > .mark,
span > .mark:visited {
  font-size: 18px;
  color: #707070;
  position: absolute;
  top: 0px;
  right: 0px;
}

span > .mark:hover {
  color: #FE7110;
}


/* get columns in there*/
@media only screen and (max-width: 1024px) {
  #content {
    font-size: 2.1em;
  }
  #column1.interior {
    border-left: 0;
    padding-left: 0.5em;
    padding-right: 0.5em;
    width: auto;
  }
  pre {
    margin-right: 0;
  }
  #column2 {
    display: none;
  }
}

@media only screen and (max-width: 1024px) and (orientation: portrait) {
  #content {
    font-size: 2.4em;
  }
  #column1.interior {
    border-left: 0;
    padding-left: 0.5em;
    padding-right: 0.5em;
    width: auto;
  }
  pre {
    margin-right: 0;
  }
  #column2 {
    display: none;
  }
}
</style>
    <script>var findHeadings = function (children) {
  return Array.prototype.filter.call(children, function (node) {
    return ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'].indexOf(node.nodeName) >= 0;
  });
};

var anchorize = function (text, linktext) {
  var safelink = text.replace(/\W/g, '_').replace(/_{2,}/g, '_');
  var idstr = !linktext ? ' ' : ' id="'+ safelink + '" ';
  return '<a class="mark"' + idstr + 'href="#' + safelink + '">' + (linktext || text) + '</a>';
};

var insertAnchors = function (headings) {
  headings.forEach(function (hx) {
    hx.innerHTML = hx.innerText + '<span>' + anchorize(hx.innerText, '#') + '</span>';
  });
};

var generateToc = function (headings) {
  var toc = ['<h2>Table of Contents</h2>'];
  var activeLevel = 0;

  headings.forEach(function (hx) {
    var level = hx.nodeName.slice(1) | 0;
    var goingUp = level > activeLevel;
    while (activeLevel !== level) {
      activeLevel += goingUp ? 1 : -1;
      toc.push(goingUp ? '<ul>' : '</ul>');
    }
    toc.push('<li>' + anchorize(hx.innerText) + '</li>');
  });

  while (activeLevel > 0) {
    activeLevel -= 1;
    toc.push('</ul>');
  }
  return toc.join('');
};

document.addEventListener("DOMContentLoaded", function () {
  var toc = document.querySelector('#toc');
  var contents = document.querySelector('#apicontent');
  var headings = findHeadings(contents.children);
  toc.innerHTML = generateToc(headings);
  insertAnchors(headings);
});
</script>
  </head>
  <body>
  <h1>Duel v3.0.1 Documentation</h1>
  <div id="toc"></div>
  <div id="apicontent"><h1 id="duel">Duel</h1>
<p>A duel tournament is an implementation of the abstract <code>Tournament</code> interface. This document will contain the main methods and helpers exposed by <code>duel</code>, but not the ones implemented in <code>Tournament</code>. The main API, which covers most standard tournament management is covered in the <a href="https://clux.github.com/tournament">tournament API</a>.</p>
<h2 id="duel-class">Duel Class</h2>
<p>Let <code>Duel = require(&#39;duel&#39;)</code>. A Duel tournament can be created directly via this:</p>
<h3 id="duel-numplayers-opts-duel">Duel(numPlayers, opts) :: duel</h3>
<p>Returns a <code>Duel</code> instance.</p>
<pre><code class="lang-js"><span class="hljs-variable"><span class="hljs-keyword">var</span> duelSingle</span> = Duel(<span class="hljs-number">8</span>, { last: Duel.WB }); <span class="hljs-comment">// 8p Single elimination with bronze final</span>
<span class="hljs-variable"><span class="hljs-keyword">var</span> duelDouble</span> = Duel(<span class="hljs-number">16</span>, { last: Duel.LB, short: <span class="hljs-literal">true</span> }) <span class="hljs-comment">// 16p Double elimination with a single grand final</span>
</code></pre>
<h4 id="options">Options</h4>
<p>Constructor options are</p>
<pre><code class="lang-js">{
  last: <span class="hljs-keyword">Type</span>, // Either Duel.LB or Duel.WB for the last bracket <span class="hljs-type">in</span> <span class="hljs-keyword">use</span>
  short: Boolean // Whether to skip bronze <span class="hljs-keyword">final</span> <span class="hljs-type">in</span> single elimintation or potential <span class="hljs-type">double</span> <span class="hljs-keyword">final</span> <span class="hljs-type">in</span> <span class="hljs-type">double</span> elimination
}
</code></pre>
<h4 id="enumerable-properties">Enumerable Properties</h4>
<p>Enumerable properties of the instance are NOT considered part of the API unless explicitly stated herein.</p>
<h2 id="duel-statics">Duel Statics</h2>
<h3 id="duel-attachnames-fn-monkeypatch">Duel.attachNames(fn) :: MonkeyPatch</h3>
<p>This will create a <code>roundName</code> method on <code>Duel</code>.
For example usage see <a href="https://github.com/clux/duel-names">duel-names</a>.</p>
<h2 id="duel-methods">Duel Methods</h2>
<h3 id="duel-right-id-rightid-index-">duel.right(id) :: [rightId, index]</h3>
<p>Given a match <code>Id</code>, produce the match and position to advance winner rightwards to in the current bracket.</p>
<pre><code class="lang-js"><span class="hljs-variable"><span class="hljs-keyword">var</span> id</span> = duel.matches[<span class="hljs-number">0</span>].id; <span class="hljs-comment">// { s: 1, r: 1, m: 1 }</span>
duel.right(id); <span class="hljs-comment">// [ { s: 1, r: 2, m: 1}, 0 ]</span>
</code></pre>
<p>Here, the winner of WB R1 M1 will move to index 0 in the player array for WB R2 M1.</p>
<h3 id="duel-down-id-downid-index-">duel.down(id) :: [downId, index]</h3>
<p>Given a match <code>Id</code>, produce the match and position to advance loser downwards to in the bracket below.</p>
<pre><code class="lang-js"><span class="hljs-variable"><span class="hljs-keyword">var</span> id</span> = duel.matches[<span class="hljs-number">1</span>].id; <span class="hljs-comment">// { s: 1, r: 1, m: 2 }</span>
duel.down(id); <span class="hljs-comment">// [ { s: 2, r: 1, m: 1 }, 1 ]</span>
</code></pre>
<p>Here, the loser of WB R1 M1 will drop down to index 1 in the player array for LB R1 M2.</p>
<h2 id="duel-constants">Duel Constants</h2>
<h3 id="duel-wb-1">Duel.WB :: 1</h3>
<h3 id="duel-lb-2">Duel.LB :: 2</h3>
<p>Bracket types are either <code>Duel.WB</code>, or <code>Duel.LB</code>. These are valued as <code>1</code> and <code>2</code> respectively, after their bracket numbers in the match id.</p>
<h3 id="duel-wo-1">Duel.WO :: -1</h3>
<p>This is found in certain player arrays in matches when <code>numPlayers</code> is not a perfect power of two. These only occur in WBR1, LBR1 or LBR2.</p>
<h2 id="id-class">Id Class</h2>
<p>The match ids generated by <code>Duel</code> are just thin wrappers around the normal match ids, but with a string representation:</p>
<pre><code class="lang-js">duel.matches[<span class="hljs-number">0</span>]; <span class="hljs-comment">// { s: 1, r: 1, m: 1 }</span>
duel.matches[<span class="hljs-number">0</span>].toString(); <span class="hljs-comment">// WB R1 M1</span>
</code></pre>
</div>
  </body>
  </html>
  